extends:
  - semantic-release-preconfigured-conventional-commits
plugins:
  - "@semantic-release/release-notes-generator"
  - "@semantic-release/changelog"
  -
    - "@semantic-release/exec"
    - publishCmd: |
        git tag -a -f ${nextRelease.version} ${nextRelease.version} -F CHANGELOG.md
        git push --force origin ${nextRelease.version}
        ./gradlew releaseKotlinMavenOnMavenCentralNexus || exit 1
        ./gradlew publishPlugins -Pgradle.publish.key=$GRADLE_PUBLISH_KEY -Pgradle.publish.secret=$GRADLE_PUBLISH_SECRET || exit 2
        ./gradlew publishKotlinMavenPublicationToGithubRepository || true
  - "@semantic-release/github"
  - "@semantic-release/git"
